<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>File List</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap');

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #FFFFFF;
            color: #333;
            margin: 0;
            padding: 0;
        }

        h1 {
            text-align: center;
            padding: 20px;
            background-color: #0b9444;
            color: white;
        }

        form {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        input[type="text"] {
            margin-right: 10px;
            padding: 10px;
            border: 2px solid #0b9444;
            border-radius: 4px;
            font-size: 16px;
            font-family: 'Montserrat', sans-serif;
             width: 30%;
        }

        input[type="submit"] {
            padding: 10px 20px;
            border: none;
            background-color: #0b9444;
            color: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-family: 'Montserrat', sans-serif;
        }

        input[type="submit"]:hover {
            background-color: #086830;
        }

        table {
            width: 60%;
            margin: 0 auto;
            border-radius: 10px;
            overflow: hidden; 
            border-collapse: separate;
            border-spacing: 0;
            border: 1px solid #ddd;
        }

        td, th {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #0b9444;
            color: white;
        }

        a {
            color: #0b9444;
        }

      select {
            margin-right: 10px;
            border: 2px solid #0b9444;
            border-radius: 4px;
            font-family: 'Montserrat', sans-serif;
        }


       #search-bar {
            position: sticky;
            top: 0;
            z-index: 100;
            background-color: white;  /* added this to ensure the search bar background is not transparent */
        }

        #table-container {
            height: 80vh;  /* adjust this value as needed */
            overflow: auto;
        }
    </style>

    <script>
        function updatePlaceholder() {
            var select = document.querySelector('select[name="folder"]');
            var searchInput = document.querySelector('input[name="search_term"]');
            if (select.value === "COA") {
                searchInput.placeholder = "Enter Lot Number";
            } else if (select.value === "SDS") {
                searchInput.placeholder = "Enter Product Name";
            } else if (select.value === "Formula") {
                searchInput.placeholder = "Enter Multiple Key Words";
            }
        }
      window.onload = updatePlaceholder;
    </script>
  
</head>
<body>
<div id="search-bar">    
  <!-- Display an image only if there's no search term -->
        
        <!-- Form to submit search term -->
    <!-- Form to submit search term -->
<form method="GET" action="/">
    <select name="folder" onchange="updatePlaceholder()">
        <option value="COA" {% if selected_folder == 'COA' %} selected {% endif %}>COA</option>
        <option value="SDS" {% if selected_folder == 'SDS' %} selected {% endif %}>SDS</option>
        <option value="Formula" {% if selected_folder == 'Formula' %} selected {% endif %}>Formula</option>
    </select>
    <input type="text" name="search_term" placeholder="Enter Lot Number" value="{{ search_term or '' }}">
    <input type="submit" value="Search">
</form>
</div>
   <div id="table-container"> 
    <table>
        <thead>
            <tr>
                <th>File Name</th>
                <th>File Link</th>
            </tr>
        </thead>
        <tbody>
            {% for file in results %}
                <tr>
                    <td>{{ file.name }}</td>
                    <td><a href="https://drive.google.com/uc?id={{ file.id }}" target="_blank">Open File</a></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
     {% if not search_term %}
        <center><img src="https://cdn.shopify.com/s/files/1/0281/8087/3356/files/coadb_initial.png?v=1691465966" alt="Initial Image" width="40%"></center>
        {% endif %}
        
        <!-- Display the no results image if search term exists but results are empty -->
        {% if search_term and not results %}
        <center><img src="https://cdn.shopify.com/s/files/1/0281/8087/3356/files/no_results_clouds.png?v=1691292757" alt="No Results Image" width="40%"></center>
        {% endif %}
   </div>
  
</body>
</html>